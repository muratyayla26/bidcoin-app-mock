{"ast":null,"code":"var __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _StandardWalletAdapter_instances, _StandardWalletAdapter_account, _StandardWalletAdapter_publicKey, _StandardWalletAdapter_connecting, _StandardWalletAdapter_disconnecting, _StandardWalletAdapter_off, _StandardWalletAdapter_supportedTransactionVersions, _StandardWalletAdapter_wallet, _StandardWalletAdapter_readyState, _StandardWalletAdapter_connect, _StandardWalletAdapter_connected, _StandardWalletAdapter_disconnected, _StandardWalletAdapter_reset, _StandardWalletAdapter_changed, _StandardWalletAdapter_signTransaction, _StandardWalletAdapter_signAllTransactions, _StandardWalletAdapter_signMessage, _StandardWalletAdapter_signIn;\nimport { BaseWalletAdapter, isVersionedTransaction, WalletAccountError, WalletConfigError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignInError, WalletSignMessageError, WalletSignTransactionError } from '@solana/wallet-adapter-base';\nimport { SolanaSignAndSendTransaction, SolanaSignIn, SolanaSignMessage, SolanaSignTransaction } from '@solana/wallet-standard-features';\nimport { getChainForEndpoint, getCommitment } from '@solana/wallet-standard-util';\nimport { PublicKey, Transaction, VersionedTransaction } from '@solana/web3.js';\nimport { StandardConnect, StandardDisconnect, StandardEvents } from '@wallet-standard/features';\nimport { arraysEqual } from '@wallet-standard/wallet';\nimport bs58 from 'bs58';\n/** TODO: docs */\nexport class StandardWalletAdapter extends BaseWalletAdapter {\n  constructor(_ref) {\n    let {\n      wallet\n    } = _ref;\n    super();\n    _StandardWalletAdapter_instances.add(this);\n    _StandardWalletAdapter_account.set(this, void 0);\n    _StandardWalletAdapter_publicKey.set(this, void 0);\n    _StandardWalletAdapter_connecting.set(this, void 0);\n    _StandardWalletAdapter_disconnecting.set(this, void 0);\n    _StandardWalletAdapter_off.set(this, void 0);\n    _StandardWalletAdapter_supportedTransactionVersions.set(this, void 0);\n    _StandardWalletAdapter_wallet.set(this, void 0);\n    _StandardWalletAdapter_readyState.set(this, typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.Installed);\n    _StandardWalletAdapter_changed.set(this, properties => {\n      // If accounts have changed on the wallet, reflect this on the adapter.\n      if ('accounts' in properties) {\n        const account = __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").accounts[0];\n        // If the adapter isn't connected, or is disconnecting, or the first account hasn't changed, do nothing.\n        if (__classPrivateFieldGet(this, _StandardWalletAdapter_account, \"f\") && !__classPrivateFieldGet(this, _StandardWalletAdapter_disconnecting, \"f\") && account !== __classPrivateFieldGet(this, _StandardWalletAdapter_account, \"f\")) {\n          // If there's a connected account, connect the adapter. Otherwise, disconnect it.\n          if (account) {\n            // Connect the adapter.\n            __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_connected).call(this, account);\n          } else {\n            // Emit an error because the wallet spontaneously disconnected.\n            this.emit('error', new WalletDisconnectedError());\n            // Disconnect the adapter.\n            __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_disconnected).call(this);\n          }\n        }\n      }\n      // After reflecting account changes, if features have changed on the wallet, reflect this on the adapter.\n      if ('features' in properties) {\n        __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_reset).call(this);\n      }\n    });\n    __classPrivateFieldSet(this, _StandardWalletAdapter_wallet, wallet, \"f\");\n    __classPrivateFieldSet(this, _StandardWalletAdapter_account, null, \"f\");\n    __classPrivateFieldSet(this, _StandardWalletAdapter_publicKey, null, \"f\");\n    __classPrivateFieldSet(this, _StandardWalletAdapter_connecting, false, \"f\");\n    __classPrivateFieldSet(this, _StandardWalletAdapter_disconnecting, false, \"f\");\n    __classPrivateFieldSet(this, _StandardWalletAdapter_off, __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[StandardEvents].on('change', __classPrivateFieldGet(this, _StandardWalletAdapter_changed, \"f\")), \"f\");\n    __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_reset).call(this);\n  }\n  get name() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").name;\n  }\n  get url() {\n    return 'https://github.com/solana-labs/wallet-standard';\n  }\n  get icon() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").icon;\n  }\n  get readyState() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_readyState, \"f\");\n  }\n  get publicKey() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_publicKey, \"f\");\n  }\n  get connecting() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_connecting, \"f\");\n  }\n  get supportedTransactionVersions() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_supportedTransactionVersions, \"f\");\n  }\n  get wallet() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\");\n  }\n  get standard() {\n    return true;\n  }\n  destroy() {\n    __classPrivateFieldSet(this, _StandardWalletAdapter_account, null, \"f\");\n    __classPrivateFieldSet(this, _StandardWalletAdapter_publicKey, null, \"f\");\n    __classPrivateFieldSet(this, _StandardWalletAdapter_connecting, false, \"f\");\n    __classPrivateFieldSet(this, _StandardWalletAdapter_disconnecting, false, \"f\");\n    const off = __classPrivateFieldGet(this, _StandardWalletAdapter_off, \"f\");\n    if (off) {\n      __classPrivateFieldSet(this, _StandardWalletAdapter_off, null, \"f\");\n      off();\n    }\n  }\n  async autoConnect() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_connect).call(this, {\n      silent: true\n    });\n  }\n  async connect() {\n    return __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_connect).call(this);\n  }\n  async disconnect() {\n    if (StandardDisconnect in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features) {\n      try {\n        __classPrivateFieldSet(this, _StandardWalletAdapter_disconnecting, true, \"f\");\n        await __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[StandardDisconnect].disconnect();\n      } catch (error) {\n        this.emit('error', new WalletDisconnectionError(error?.message, error));\n      } finally {\n        __classPrivateFieldSet(this, _StandardWalletAdapter_disconnecting, false, \"f\");\n      }\n    }\n    __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_disconnected).call(this);\n  }\n  async sendTransaction(transaction, connection) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    try {\n      const account = __classPrivateFieldGet(this, _StandardWalletAdapter_account, \"f\");\n      if (!account) throw new WalletNotConnectedError();\n      let feature;\n      if (SolanaSignAndSendTransaction in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features) {\n        if (account.features.includes(SolanaSignAndSendTransaction)) {\n          feature = SolanaSignAndSendTransaction;\n        } else if (SolanaSignTransaction in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features && account.features.includes(SolanaSignTransaction)) {\n          feature = SolanaSignTransaction;\n        } else {\n          throw new WalletAccountError();\n        }\n      } else if (SolanaSignTransaction in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features) {\n        if (!account.features.includes(SolanaSignTransaction)) throw new WalletAccountError();\n        feature = SolanaSignTransaction;\n      } else {\n        throw new WalletConfigError();\n      }\n      const chain = getChainForEndpoint(connection.rpcEndpoint);\n      if (!account.chains.includes(chain)) throw new WalletSendTransactionError();\n      try {\n        const {\n          signers,\n          ...sendOptions\n        } = options;\n        let serializedTransaction;\n        if (isVersionedTransaction(transaction)) {\n          signers?.length && transaction.sign(signers);\n          serializedTransaction = transaction.serialize();\n        } else {\n          transaction = await this.prepareTransaction(transaction, connection, sendOptions);\n          signers?.length && transaction.partialSign(...signers);\n          serializedTransaction = new Uint8Array(transaction.serialize({\n            requireAllSignatures: false,\n            verifySignatures: false\n          }));\n        }\n        if (feature === SolanaSignAndSendTransaction) {\n          const [output] = await __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[SolanaSignAndSendTransaction].signAndSendTransaction({\n            account,\n            chain,\n            transaction: serializedTransaction,\n            options: {\n              preflightCommitment: getCommitment(sendOptions.preflightCommitment || connection.commitment),\n              skipPreflight: sendOptions.skipPreflight,\n              maxRetries: sendOptions.maxRetries,\n              minContextSlot: sendOptions.minContextSlot\n            }\n          });\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          return bs58.encode(output.signature);\n        } else {\n          const [output] = await __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[SolanaSignTransaction].signTransaction({\n            account,\n            chain,\n            transaction: serializedTransaction,\n            options: {\n              preflightCommitment: getCommitment(sendOptions.preflightCommitment || connection.commitment),\n              minContextSlot: sendOptions.minContextSlot\n            }\n          });\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          return await connection.sendRawTransaction(output.signedTransaction, {\n            ...sendOptions,\n            preflightCommitment: getCommitment(sendOptions.preflightCommitment || connection.commitment)\n          });\n        }\n      } catch (error) {\n        if (error instanceof WalletError) throw error;\n        throw new WalletSendTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n}\n_StandardWalletAdapter_account = new WeakMap(), _StandardWalletAdapter_publicKey = new WeakMap(), _StandardWalletAdapter_connecting = new WeakMap(), _StandardWalletAdapter_disconnecting = new WeakMap(), _StandardWalletAdapter_off = new WeakMap(), _StandardWalletAdapter_supportedTransactionVersions = new WeakMap(), _StandardWalletAdapter_wallet = new WeakMap(), _StandardWalletAdapter_readyState = new WeakMap(), _StandardWalletAdapter_changed = new WeakMap(), _StandardWalletAdapter_instances = new WeakSet(), _StandardWalletAdapter_connect = async function _StandardWalletAdapter_connect(input) {\n  try {\n    if (this.connected || this.connecting) return;\n    if (__classPrivateFieldGet(this, _StandardWalletAdapter_readyState, \"f\") !== WalletReadyState.Installed) throw new WalletNotReadyError();\n    __classPrivateFieldSet(this, _StandardWalletAdapter_connecting, true, \"f\");\n    if (!__classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").accounts.length) {\n      try {\n        await __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[StandardConnect].connect(input);\n      } catch (error) {\n        throw new WalletConnectionError(error?.message, error);\n      }\n    }\n    const account = __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").accounts[0];\n    if (!account) throw new WalletAccountError();\n    __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_connected).call(this, account);\n  } catch (error) {\n    this.emit('error', error);\n    throw error;\n  } finally {\n    __classPrivateFieldSet(this, _StandardWalletAdapter_connecting, false, \"f\");\n  }\n}, _StandardWalletAdapter_connected = function _StandardWalletAdapter_connected(account) {\n  let publicKey;\n  try {\n    // Use account.address instead of account.publicKey since address could be a PDA\n    publicKey = new PublicKey(account.address);\n  } catch (error) {\n    throw new WalletPublicKeyError(error?.message, error);\n  }\n  __classPrivateFieldSet(this, _StandardWalletAdapter_account, account, \"f\");\n  __classPrivateFieldSet(this, _StandardWalletAdapter_publicKey, publicKey, \"f\");\n  __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_reset).call(this);\n  this.emit('connect', publicKey);\n}, _StandardWalletAdapter_disconnected = function _StandardWalletAdapter_disconnected() {\n  __classPrivateFieldSet(this, _StandardWalletAdapter_account, null, \"f\");\n  __classPrivateFieldSet(this, _StandardWalletAdapter_publicKey, null, \"f\");\n  __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_reset).call(this);\n  this.emit('disconnect');\n}, _StandardWalletAdapter_reset = function _StandardWalletAdapter_reset() {\n  const supportedTransactionVersions = SolanaSignAndSendTransaction in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features ? __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[SolanaSignAndSendTransaction].supportedTransactionVersions : __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[SolanaSignTransaction].supportedTransactionVersions;\n  __classPrivateFieldSet(this, _StandardWalletAdapter_supportedTransactionVersions, arraysEqual(supportedTransactionVersions, ['legacy']) ? null : new Set(supportedTransactionVersions), \"f\");\n  if (SolanaSignTransaction in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features && __classPrivateFieldGet(this, _StandardWalletAdapter_account, \"f\")?.features.includes(SolanaSignTransaction)) {\n    this.signTransaction = __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_signTransaction);\n    this.signAllTransactions = __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_signAllTransactions);\n  } else {\n    delete this.signTransaction;\n    delete this.signAllTransactions;\n  }\n  if (SolanaSignMessage in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features && __classPrivateFieldGet(this, _StandardWalletAdapter_account, \"f\")?.features.includes(SolanaSignMessage)) {\n    this.signMessage = __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_signMessage);\n  } else {\n    delete this.signMessage;\n  }\n  if (SolanaSignIn in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features) {\n    this.signIn = __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_signIn);\n  } else {\n    delete this.signIn;\n  }\n}, _StandardWalletAdapter_signTransaction = async function _StandardWalletAdapter_signTransaction(transaction) {\n  try {\n    const account = __classPrivateFieldGet(this, _StandardWalletAdapter_account, \"f\");\n    if (!account) throw new WalletNotConnectedError();\n    if (!(SolanaSignTransaction in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features)) throw new WalletConfigError();\n    if (!account.features.includes(SolanaSignTransaction)) throw new WalletAccountError();\n    try {\n      const signedTransactions = await __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[SolanaSignTransaction].signTransaction({\n        account,\n        transaction: isVersionedTransaction(transaction) ? transaction.serialize() : new Uint8Array(transaction.serialize({\n          requireAllSignatures: false,\n          verifySignatures: false\n        }))\n      });\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const serializedTransaction = signedTransactions[0].signedTransaction;\n      return isVersionedTransaction(transaction) ? VersionedTransaction.deserialize(serializedTransaction) : Transaction.from(serializedTransaction);\n    } catch (error) {\n      if (error instanceof WalletError) throw error;\n      throw new WalletSignTransactionError(error?.message, error);\n    }\n  } catch (error) {\n    this.emit('error', error);\n    throw error;\n  }\n}, _StandardWalletAdapter_signAllTransactions = async function _StandardWalletAdapter_signAllTransactions(transactions) {\n  try {\n    const account = __classPrivateFieldGet(this, _StandardWalletAdapter_account, \"f\");\n    if (!account) throw new WalletNotConnectedError();\n    if (!(SolanaSignTransaction in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features)) throw new WalletConfigError();\n    if (!account.features.includes(SolanaSignTransaction)) throw new WalletAccountError();\n    try {\n      const signedTransactions = await __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[SolanaSignTransaction].signTransaction(...transactions.map(transaction => ({\n        account,\n        transaction: isVersionedTransaction(transaction) ? transaction.serialize() : new Uint8Array(transaction.serialize({\n          requireAllSignatures: false,\n          verifySignatures: false\n        }))\n      })));\n      return transactions.map((transaction, index) => {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const signedTransaction = signedTransactions[index].signedTransaction;\n        return isVersionedTransaction(transaction) ? VersionedTransaction.deserialize(signedTransaction) : Transaction.from(signedTransaction);\n      });\n    } catch (error) {\n      throw new WalletSignTransactionError(error?.message, error);\n    }\n  } catch (error) {\n    this.emit('error', error);\n    throw error;\n  }\n}, _StandardWalletAdapter_signMessage = async function _StandardWalletAdapter_signMessage(message) {\n  try {\n    const account = __classPrivateFieldGet(this, _StandardWalletAdapter_account, \"f\");\n    if (!account) throw new WalletNotConnectedError();\n    if (!(SolanaSignMessage in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features)) throw new WalletConfigError();\n    if (!account.features.includes(SolanaSignMessage)) throw new WalletAccountError();\n    try {\n      const signedMessages = await __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[SolanaSignMessage].signMessage({\n        account,\n        message\n      });\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      return signedMessages[0].signature;\n    } catch (error) {\n      throw new WalletSignMessageError(error?.message, error);\n    }\n  } catch (error) {\n    this.emit('error', error);\n    throw error;\n  }\n}, _StandardWalletAdapter_signIn = async function _StandardWalletAdapter_signIn() {\n  let input = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  try {\n    if (!(SolanaSignIn in __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features)) throw new WalletConfigError();\n    let output;\n    try {\n      [output] = await __classPrivateFieldGet(this, _StandardWalletAdapter_wallet, \"f\").features[SolanaSignIn].signIn(input);\n    } catch (error) {\n      throw new WalletSignInError(error?.message, error);\n    }\n    if (!output) throw new WalletSignInError();\n    __classPrivateFieldGet(this, _StandardWalletAdapter_instances, \"m\", _StandardWalletAdapter_connected).call(this, output.account);\n    return output;\n  } catch (error) {\n    this.emit('error', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["BaseWalletAdapter","isVersionedTransaction","WalletAccountError","WalletConfigError","WalletConnectionError","WalletDisconnectedError","WalletDisconnectionError","WalletError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSendTransactionError","WalletSignInError","WalletSignMessageError","WalletSignTransactionError","SolanaSignAndSendTransaction","SolanaSignIn","SolanaSignMessage","SolanaSignTransaction","getChainForEndpoint","getCommitment","PublicKey","Transaction","VersionedTransaction","StandardConnect","StandardDisconnect","StandardEvents","arraysEqual","bs58","StandardWalletAdapter","constructor","_ref","wallet","_StandardWalletAdapter_account","set","_StandardWalletAdapter_publicKey","_StandardWalletAdapter_connecting","_StandardWalletAdapter_disconnecting","_StandardWalletAdapter_off","_StandardWalletAdapter_supportedTransactionVersions","_StandardWalletAdapter_wallet","_StandardWalletAdapter_readyState","window","document","Unsupported","Installed","_StandardWalletAdapter_changed","properties","account","__classPrivateFieldGet","accounts","_StandardWalletAdapter_instances","_StandardWalletAdapter_connected","call","emit","_StandardWalletAdapter_disconnected","_StandardWalletAdapter_reset","__classPrivateFieldSet","features","on","name","url","icon","readyState","publicKey","connecting","supportedTransactionVersions","standard","destroy","off","autoConnect","_StandardWalletAdapter_connect","silent","connect","disconnect","error","message","sendTransaction","transaction","connection","options","arguments","length","undefined","feature","includes","chain","rpcEndpoint","chains","signers","sendOptions","serializedTransaction","sign","serialize","prepareTransaction","partialSign","Uint8Array","requireAllSignatures","verifySignatures","output","signAndSendTransaction","preflightCommitment","commitment","skipPreflight","maxRetries","minContextSlot","encode","signature","signTransaction","sendRawTransaction","signedTransaction","input","connected","address","Set","_StandardWalletAdapter_signTransaction","signAllTransactions","_StandardWalletAdapter_signAllTransactions","signMessage","_StandardWalletAdapter_signMessage","signIn","_StandardWalletAdapter_signIn","signedTransactions","deserialize","from","transactions","map","index","signedMessages"],"sources":["C:\\Users\\Administrator\\solana-wallet-app\\client\\node_modules\\@solana\\wallet-standard-wallet-adapter-react\\node_modules\\@solana\\wallet-standard-wallet-adapter-base\\src\\adapter.ts"],"sourcesContent":["import {\n    BaseWalletAdapter,\n    isVersionedTransaction,\n    type SendTransactionOptions,\n    type StandardWalletAdapter as StandardWalletAdapterType,\n    type SupportedTransactionVersions,\n    WalletAccountError,\n    type WalletAdapterCompatibleStandardWallet,\n    WalletConfigError,\n    WalletConnectionError,\n    WalletDisconnectedError,\n    WalletDisconnectionError,\n    WalletError,\n    type WalletName,\n    WalletNotConnectedError,\n    WalletNotReadyError,\n    WalletPublicKeyError,\n    WalletReadyState,\n    WalletSendTransactionError,\n    WalletSignInError,\n    WalletSignMessageError,\n    WalletSignTransactionError,\n} from '@solana/wallet-adapter-base';\nimport {\n    SolanaSignAndSendTransaction,\n    type SolanaSignAndSendTransactionFeature,\n    SolanaSignIn,\n    type SolanaSignInInput,\n    type SolanaSignInOutput,\n    SolanaSignMessage,\n    SolanaSignTransaction,\n    type SolanaSignTransactionFeature,\n} from '@solana/wallet-standard-features';\nimport { getChainForEndpoint, getCommitment } from '@solana/wallet-standard-util';\nimport type { Connection, TransactionSignature } from '@solana/web3.js';\nimport { PublicKey, Transaction, VersionedTransaction } from '@solana/web3.js';\nimport type { WalletAccount } from '@wallet-standard/base';\nimport {\n    StandardConnect,\n    type StandardConnectInput,\n    StandardDisconnect,\n    StandardEvents,\n    type StandardEventsListeners,\n} from '@wallet-standard/features';\nimport { arraysEqual } from '@wallet-standard/wallet';\nimport bs58 from 'bs58';\n\n/** TODO: docs */\nexport interface StandardWalletAdapterConfig {\n    wallet: WalletAdapterCompatibleStandardWallet;\n}\n\n/** TODO: docs */\nexport class StandardWalletAdapter extends BaseWalletAdapter implements StandardWalletAdapterType {\n    #account: WalletAccount | null;\n    #publicKey: PublicKey | null;\n    #connecting: boolean;\n    #disconnecting: boolean;\n    #off: (() => void) | null;\n    #supportedTransactionVersions: SupportedTransactionVersions;\n    readonly #wallet: WalletAdapterCompatibleStandardWallet;\n    readonly #readyState: WalletReadyState =\n        typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.Installed;\n\n    get name() {\n        return this.#wallet.name as WalletName;\n    }\n\n    get url() {\n        return 'https://github.com/solana-labs/wallet-standard';\n    }\n\n    get icon() {\n        return this.#wallet.icon;\n    }\n\n    get readyState() {\n        return this.#readyState;\n    }\n\n    get publicKey() {\n        return this.#publicKey;\n    }\n\n    get connecting() {\n        return this.#connecting;\n    }\n\n    get supportedTransactionVersions() {\n        return this.#supportedTransactionVersions;\n    }\n\n    get wallet(): WalletAdapterCompatibleStandardWallet {\n        return this.#wallet;\n    }\n\n    get standard() {\n        return true as const;\n    }\n\n    constructor({ wallet }: StandardWalletAdapterConfig) {\n        super();\n\n        this.#wallet = wallet;\n        this.#account = null;\n        this.#publicKey = null;\n        this.#connecting = false;\n        this.#disconnecting = false;\n        this.#off = this.#wallet.features[StandardEvents].on('change', this.#changed);\n\n        this.#reset();\n    }\n\n    destroy(): void {\n        this.#account = null;\n        this.#publicKey = null;\n        this.#connecting = false;\n        this.#disconnecting = false;\n\n        const off = this.#off;\n        if (off) {\n            this.#off = null;\n            off();\n        }\n    }\n\n    async autoConnect(): Promise<void> {\n        return this.#connect({ silent: true });\n    }\n\n    async connect(): Promise<void> {\n        return this.#connect();\n    }\n\n    async #connect(input?: StandardConnectInput): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            if (this.#readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n\n            this.#connecting = true;\n\n            if (!this.#wallet.accounts.length) {\n                try {\n                    await this.#wallet.features[StandardConnect].connect(input);\n                } catch (error: any) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n\n            const account = this.#wallet.accounts[0];\n            if (!account) throw new WalletAccountError();\n\n            this.#connected(account);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this.#connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        if (StandardDisconnect in this.#wallet.features) {\n            try {\n                this.#disconnecting = true;\n                await this.#wallet.features[StandardDisconnect].disconnect();\n            } catch (error: any) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            } finally {\n                this.#disconnecting = false;\n            }\n        }\n\n        this.#disconnected();\n    }\n\n    #connected(account: WalletAccount) {\n        let publicKey: PublicKey;\n        try {\n            // Use account.address instead of account.publicKey since address could be a PDA\n            publicKey = new PublicKey(account.address);\n        } catch (error: any) {\n            throw new WalletPublicKeyError(error?.message, error);\n        }\n\n        this.#account = account;\n        this.#publicKey = publicKey;\n        this.#reset();\n        this.emit('connect', publicKey);\n    }\n\n    #disconnected(): void {\n        this.#account = null;\n        this.#publicKey = null;\n        this.#reset();\n        this.emit('disconnect');\n    }\n\n    #reset() {\n        const supportedTransactionVersions =\n            SolanaSignAndSendTransaction in this.#wallet.features\n                ? this.#wallet.features[SolanaSignAndSendTransaction].supportedTransactionVersions\n                : this.#wallet.features[SolanaSignTransaction].supportedTransactionVersions;\n        this.#supportedTransactionVersions = arraysEqual(supportedTransactionVersions, ['legacy'])\n            ? null\n            : new Set(supportedTransactionVersions);\n\n        if (SolanaSignTransaction in this.#wallet.features && this.#account?.features.includes(SolanaSignTransaction)) {\n            this.signTransaction = this.#signTransaction;\n            this.signAllTransactions = this.#signAllTransactions;\n        } else {\n            delete this.signTransaction;\n            delete this.signAllTransactions;\n        }\n\n        if (SolanaSignMessage in this.#wallet.features && this.#account?.features.includes(SolanaSignMessage)) {\n            this.signMessage = this.#signMessage;\n        } else {\n            delete this.signMessage;\n        }\n\n        if (SolanaSignIn in this.#wallet.features) {\n            this.signIn = this.#signIn;\n        } else {\n            delete this.signIn;\n        }\n    }\n\n    #changed: StandardEventsListeners['change'] = (properties) => {\n        // If accounts have changed on the wallet, reflect this on the adapter.\n        if ('accounts' in properties) {\n            const account = this.#wallet.accounts[0];\n            // If the adapter isn't connected, or is disconnecting, or the first account hasn't changed, do nothing.\n            if (this.#account && !this.#disconnecting && account !== this.#account) {\n                // If there's a connected account, connect the adapter. Otherwise, disconnect it.\n                if (account) {\n                    // Connect the adapter.\n                    this.#connected(account);\n                } else {\n                    // Emit an error because the wallet spontaneously disconnected.\n                    this.emit('error', new WalletDisconnectedError());\n                    // Disconnect the adapter.\n                    this.#disconnected();\n                }\n            }\n        }\n\n        // After reflecting account changes, if features have changed on the wallet, reflect this on the adapter.\n        if ('features' in properties) {\n            this.#reset();\n        }\n    };\n\n    async sendTransaction<T extends Transaction | VersionedTransaction>(\n        transaction: T,\n        connection: Connection,\n        options: SendTransactionOptions = {}\n    ): Promise<TransactionSignature> {\n        try {\n            const account = this.#account;\n            if (!account) throw new WalletNotConnectedError();\n\n            let feature: typeof SolanaSignAndSendTransaction | typeof SolanaSignTransaction;\n            if (SolanaSignAndSendTransaction in this.#wallet.features) {\n                if (account.features.includes(SolanaSignAndSendTransaction)) {\n                    feature = SolanaSignAndSendTransaction;\n                } else if (\n                    SolanaSignTransaction in this.#wallet.features &&\n                    account.features.includes(SolanaSignTransaction)\n                ) {\n                    feature = SolanaSignTransaction;\n                } else {\n                    throw new WalletAccountError();\n                }\n            } else if (SolanaSignTransaction in this.#wallet.features) {\n                if (!account.features.includes(SolanaSignTransaction)) throw new WalletAccountError();\n                feature = SolanaSignTransaction;\n            } else {\n                throw new WalletConfigError();\n            }\n\n            const chain = getChainForEndpoint(connection.rpcEndpoint);\n            if (!account.chains.includes(chain)) throw new WalletSendTransactionError();\n\n            try {\n                const { signers, ...sendOptions } = options;\n\n                let serializedTransaction: Uint8Array;\n                if (isVersionedTransaction(transaction)) {\n                    signers?.length && transaction.sign(signers);\n                    serializedTransaction = transaction.serialize();\n                } else {\n                    transaction = (await this.prepareTransaction(transaction, connection, sendOptions)) as T;\n                    signers?.length && (transaction as Transaction).partialSign(...signers);\n                    serializedTransaction = new Uint8Array(\n                        (transaction as Transaction).serialize({\n                            requireAllSignatures: false,\n                            verifySignatures: false,\n                        })\n                    );\n                }\n\n                if (feature === SolanaSignAndSendTransaction) {\n                    const [output] = await (this.#wallet.features as SolanaSignAndSendTransactionFeature)[\n                        SolanaSignAndSendTransaction\n                    ].signAndSendTransaction({\n                        account,\n                        chain,\n                        transaction: serializedTransaction,\n                        options: {\n                            preflightCommitment: getCommitment(\n                                sendOptions.preflightCommitment || connection.commitment\n                            ),\n                            skipPreflight: sendOptions.skipPreflight,\n                            maxRetries: sendOptions.maxRetries,\n                            minContextSlot: sendOptions.minContextSlot,\n                        },\n                    });\n\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    return bs58.encode(output!.signature);\n                } else {\n                    const [output] = await (this.#wallet.features as SolanaSignTransactionFeature)[\n                        SolanaSignTransaction\n                    ].signTransaction({\n                        account,\n                        chain,\n                        transaction: serializedTransaction,\n                        options: {\n                            preflightCommitment: getCommitment(\n                                sendOptions.preflightCommitment || connection.commitment\n                            ),\n                            minContextSlot: sendOptions.minContextSlot,\n                        },\n                    });\n\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    return await connection.sendRawTransaction(output!.signedTransaction, {\n                        ...sendOptions,\n                        preflightCommitment: getCommitment(sendOptions.preflightCommitment || connection.commitment),\n                    });\n                }\n            } catch (error: any) {\n                if (error instanceof WalletError) throw error;\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    signTransaction: (<T extends Transaction | VersionedTransaction>(transaction: T) => Promise<T>) | undefined;\n    async #signTransaction<T extends Transaction | VersionedTransaction>(transaction: T): Promise<T> {\n        try {\n            const account = this.#account;\n            if (!account) throw new WalletNotConnectedError();\n\n            if (!(SolanaSignTransaction in this.#wallet.features)) throw new WalletConfigError();\n            if (!account.features.includes(SolanaSignTransaction)) throw new WalletAccountError();\n\n            try {\n                const signedTransactions = await this.#wallet.features[SolanaSignTransaction].signTransaction({\n                    account,\n                    transaction: isVersionedTransaction(transaction)\n                        ? transaction.serialize()\n                        : new Uint8Array(\n                              transaction.serialize({\n                                  requireAllSignatures: false,\n                                  verifySignatures: false,\n                              })\n                          ),\n                });\n\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                const serializedTransaction = signedTransactions[0]!.signedTransaction;\n\n                return (\n                    isVersionedTransaction(transaction)\n                        ? VersionedTransaction.deserialize(serializedTransaction)\n                        : Transaction.from(serializedTransaction)\n                ) as T;\n            } catch (error: any) {\n                if (error instanceof WalletError) throw error;\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    signAllTransactions: (<T extends Transaction | VersionedTransaction>(transaction: T[]) => Promise<T[]>) | undefined;\n    async #signAllTransactions<T extends Transaction | VersionedTransaction>(transactions: T[]): Promise<T[]> {\n        try {\n            const account = this.#account;\n            if (!account) throw new WalletNotConnectedError();\n\n            if (!(SolanaSignTransaction in this.#wallet.features)) throw new WalletConfigError();\n            if (!account.features.includes(SolanaSignTransaction)) throw new WalletAccountError();\n\n            try {\n                const signedTransactions = await this.#wallet.features[SolanaSignTransaction].signTransaction(\n                    ...transactions.map((transaction) => ({\n                        account,\n                        transaction: isVersionedTransaction(transaction)\n                            ? transaction.serialize()\n                            : new Uint8Array(\n                                  transaction.serialize({\n                                      requireAllSignatures: false,\n                                      verifySignatures: false,\n                                  })\n                              ),\n                    }))\n                );\n\n                return transactions.map((transaction, index) => {\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    const signedTransaction = signedTransactions[index]!.signedTransaction;\n\n                    return (\n                        isVersionedTransaction(transaction)\n                            ? VersionedTransaction.deserialize(signedTransaction)\n                            : Transaction.from(signedTransaction)\n                    ) as T;\n                });\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    signMessage: ((message: Uint8Array) => Promise<Uint8Array>) | undefined;\n    async #signMessage(message: Uint8Array): Promise<Uint8Array> {\n        try {\n            const account = this.#account;\n            if (!account) throw new WalletNotConnectedError();\n\n            if (!(SolanaSignMessage in this.#wallet.features)) throw new WalletConfigError();\n            if (!account.features.includes(SolanaSignMessage)) throw new WalletAccountError();\n\n            try {\n                const signedMessages = await this.#wallet.features[SolanaSignMessage].signMessage({\n                    account,\n                    message,\n                });\n\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                return signedMessages[0]!.signature;\n            } catch (error: any) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    signIn: ((input?: SolanaSignInInput) => Promise<SolanaSignInOutput>) | undefined;\n    async #signIn(input: SolanaSignInInput = {}): Promise<SolanaSignInOutput> {\n        try {\n            if (!(SolanaSignIn in this.#wallet.features)) throw new WalletConfigError();\n\n            let output: SolanaSignInOutput | undefined;\n            try {\n                [output] = await this.#wallet.features[SolanaSignIn].signIn(input);\n            } catch (error: any) {\n                throw new WalletSignInError(error?.message, error);\n            }\n\n            if (!output) throw new WalletSignInError();\n            this.#connected(output.account);\n            return output;\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}