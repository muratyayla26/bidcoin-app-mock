{"ast":null,"code":"import { BaseMessageSignerWalletAdapter, WalletConfigError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletError, WalletLoadError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError, isIosAndRedirectable, isVersionedTransaction, scopePollingDetectionStrategy } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport { detectAndRegisterSolflareMetaMaskWallet } from './metamask/detect.js';\nexport const SolflareWalletName = 'Solflare';\nexport class SolflareWalletAdapter extends BaseMessageSignerWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = SolflareWalletName;\n    this.url = 'https://solflare.com';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+';\n    this.supportedTransactionVersions = new Set(['legacy', 0]);\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.Loadable;\n    this._disconnected = () => {\n      const wallet = this._wallet;\n      if (wallet) {\n        wallet.off('disconnect', this._disconnected);\n        this._wallet = null;\n        this._publicKey = null;\n        this.emit('error', new WalletDisconnectedError());\n        this.emit('disconnect');\n      }\n    };\n    this._accountChanged = newPublicKey => {\n      if (!newPublicKey) return;\n      const publicKey = this._publicKey;\n      if (!publicKey) return;\n      try {\n        newPublicKey = new PublicKey(newPublicKey.toBytes());\n      } catch (error) {\n        this.emit('error', new WalletPublicKeyError(error?.message, error));\n        return;\n      }\n      if (publicKey.equals(newPublicKey)) return;\n      this._publicKey = newPublicKey;\n      this.emit('connect', newPublicKey);\n    };\n    this._connecting = false;\n    this._publicKey = null;\n    this._wallet = null;\n    this._config = config;\n    if (this._readyState !== WalletReadyState.Unsupported) {\n      scopePollingDetectionStrategy(() => {\n        if (window.solflare?.isSolflare || window.SolflareApp) {\n          this._readyState = WalletReadyState.Installed;\n          this.emit('readyStateChange', this._readyState);\n          return true;\n        }\n        return false;\n      });\n      detectAndRegisterSolflareMetaMaskWallet();\n    }\n  }\n  get publicKey() {\n    return this._publicKey;\n  }\n  get connecting() {\n    return this._connecting;\n  }\n  get connected() {\n    return !!this._wallet?.connected;\n  }\n  get readyState() {\n    return this._readyState;\n  }\n  async autoConnect() {\n    // Skip autoconnect in the Loadable state on iOS\n    // We can't redirect to a universal link without user input\n    if (!(this.readyState === WalletReadyState.Loadable && isIosAndRedirectable())) {\n      await this.connect();\n    }\n  }\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this._readyState !== WalletReadyState.Loadable && this._readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n      // redirect to the Solflare /browse universal link\n      // this will open the current URL in the Solflare in-wallet browser\n      if (this.readyState === WalletReadyState.Loadable && isIosAndRedirectable()) {\n        const url = encodeURIComponent(window.location.href);\n        const ref = encodeURIComponent(window.location.origin);\n        window.location.href = `https://solflare.com/ul/v1/browse/${url}?ref=${ref}`;\n        return;\n      }\n      let SolflareClass;\n      try {\n        SolflareClass = (await import('@solflare-wallet/sdk')).default;\n      } catch (error) {\n        throw new WalletLoadError(error?.message, error);\n      }\n      let wallet;\n      try {\n        wallet = new SolflareClass({\n          network: this._config.network\n        });\n      } catch (error) {\n        throw new WalletConfigError(error?.message, error);\n      }\n      this._connecting = true;\n      if (!wallet.connected) {\n        try {\n          await wallet.connect();\n        } catch (error) {\n          throw new WalletConnectionError(error?.message, error);\n        }\n      }\n      if (!wallet.publicKey) throw new WalletConnectionError();\n      let publicKey;\n      try {\n        publicKey = new PublicKey(wallet.publicKey.toBytes());\n      } catch (error) {\n        throw new WalletPublicKeyError(error?.message, error);\n      }\n      wallet.on('disconnect', this._disconnected);\n      wallet.on('accountChanged', this._accountChanged);\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n  async disconnect() {\n    const wallet = this._wallet;\n    if (wallet) {\n      wallet.off('disconnect', this._disconnected);\n      wallet.off('accountChanged', this._accountChanged);\n      this._wallet = null;\n      this._publicKey = null;\n      try {\n        await wallet.disconnect();\n      } catch (error) {\n        this.emit('error', new WalletDisconnectionError(error?.message, error));\n      }\n    }\n    this.emit('disconnect');\n  }\n  async sendTransaction(transaction, connection) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        const {\n          signers,\n          ...sendOptions\n        } = options;\n        if (isVersionedTransaction(transaction)) {\n          signers?.length && transaction.sign(signers);\n        } else {\n          transaction = await this.prepareTransaction(transaction, connection, sendOptions);\n          signers?.length && transaction.partialSign(...signers);\n        }\n        sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n        return await wallet.signAndSendTransaction(transaction, sendOptions);\n      } catch (error) {\n        if (error instanceof WalletError) throw error;\n        throw new WalletSendTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signTransaction(transaction) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return (await wallet.signTransaction(transaction)) || transaction;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signAllTransactions(transactions) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return (await wallet.signAllTransactions(transactions)) || transactions;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signMessage(message) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return await wallet.signMessage(message, 'utf8');\n      } catch (error) {\n        throw new WalletSignMessageError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"names":["BaseMessageSignerWalletAdapter","WalletConfigError","WalletConnectionError","WalletDisconnectedError","WalletDisconnectionError","WalletError","WalletLoadError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSendTransactionError","WalletSignMessageError","WalletSignTransactionError","isIosAndRedirectable","isVersionedTransaction","scopePollingDetectionStrategy","PublicKey","detectAndRegisterSolflareMetaMaskWallet","SolflareWalletName","SolflareWalletAdapter","constructor","config","arguments","length","undefined","name","url","icon","supportedTransactionVersions","Set","_readyState","window","document","Unsupported","Loadable","_disconnected","wallet","_wallet","off","_publicKey","emit","_accountChanged","newPublicKey","publicKey","toBytes","error","message","equals","_connecting","_config","solflare","isSolflare","SolflareApp","Installed","connecting","connected","readyState","autoConnect","connect","encodeURIComponent","location","href","ref","origin","SolflareClass","default","network","on","disconnect","sendTransaction","transaction","connection","options","signers","sendOptions","sign","prepareTransaction","partialSign","preflightCommitment","commitment","signAndSendTransaction","signTransaction","signAllTransactions","transactions","signMessage"],"sources":["C:\\Users\\Administrator\\solana-wallet-app\\node_modules\\@solana\\wallet-adapter-solflare\\src\\adapter.ts"],"sourcesContent":["import type { WalletAdapterNetwork, WalletName } from '@solana/wallet-adapter-base';\nimport {\n    BaseMessageSignerWalletAdapter,\n    WalletConfigError,\n    WalletConnectionError,\n    WalletDisconnectedError,\n    WalletDisconnectionError,\n    WalletError,\n    WalletLoadError,\n    WalletNotConnectedError,\n    WalletNotReadyError,\n    WalletPublicKeyError,\n    WalletReadyState,\n    WalletSendTransactionError,\n    WalletSignMessageError,\n    WalletSignTransactionError,\n    isIosAndRedirectable,\n    isVersionedTransaction,\n    scopePollingDetectionStrategy,\n    type SendTransactionOptions,\n} from '@solana/wallet-adapter-base';\nimport type { Transaction, TransactionVersion, VersionedTransaction } from '@solana/web3.js';\nimport { PublicKey, type Connection, type TransactionSignature } from '@solana/web3.js';\nimport type { default as Solflare } from '@solflare-wallet/sdk';\nimport { detectAndRegisterSolflareMetaMaskWallet } from './metamask/detect.js';\n\ninterface SolflareWindow extends Window {\n    solflare?: {\n        isSolflare?: boolean;\n    };\n    SolflareApp?: unknown;\n}\n\ndeclare const window: SolflareWindow;\n\nexport interface SolflareWalletAdapterConfig {\n    network?: WalletAdapterNetwork;\n}\n\nexport const SolflareWalletName = 'Solflare' as WalletName<'Solflare'>;\n\nexport class SolflareWalletAdapter extends BaseMessageSignerWalletAdapter {\n    name = SolflareWalletName;\n    url = 'https://solflare.com';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+';\n    supportedTransactionVersions: ReadonlySet<TransactionVersion> = new Set(['legacy', 0]);\n\n    private _connecting: boolean;\n    private _wallet: Solflare | null;\n    private _publicKey: PublicKey | null;\n    private _config: SolflareWalletAdapterConfig;\n    private _readyState: WalletReadyState =\n        typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.Loadable;\n\n    constructor(config: SolflareWalletAdapterConfig = {}) {\n        super();\n        this._connecting = false;\n        this._publicKey = null;\n        this._wallet = null;\n        this._config = config;\n\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            scopePollingDetectionStrategy(() => {\n                if (window.solflare?.isSolflare || window.SolflareApp) {\n                    this._readyState = WalletReadyState.Installed;\n                    this.emit('readyStateChange', this._readyState);\n                    return true;\n                }\n                return false;\n            });\n            detectAndRegisterSolflareMetaMaskWallet();\n        }\n    }\n\n    get publicKey() {\n        return this._publicKey;\n    }\n\n    get connecting() {\n        return this._connecting;\n    }\n\n    get connected() {\n        return !!this._wallet?.connected;\n    }\n\n    get readyState() {\n        return this._readyState;\n    }\n\n    async autoConnect(): Promise<void> {\n        // Skip autoconnect in the Loadable state on iOS\n        // We can't redirect to a universal link without user input\n        if (!(this.readyState === WalletReadyState.Loadable && isIosAndRedirectable())) {\n            await this.connect();\n        }\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            if (this._readyState !== WalletReadyState.Loadable && this._readyState !== WalletReadyState.Installed)\n                throw new WalletNotReadyError();\n\n            // redirect to the Solflare /browse universal link\n            // this will open the current URL in the Solflare in-wallet browser\n            if (this.readyState === WalletReadyState.Loadable && isIosAndRedirectable()) {\n                const url = encodeURIComponent(window.location.href);\n                const ref = encodeURIComponent(window.location.origin);\n                window.location.href = `https://solflare.com/ul/v1/browse/${url}?ref=${ref}`;\n                return;\n            }\n\n            let SolflareClass: typeof Solflare;\n            try {\n                SolflareClass = (await import('@solflare-wallet/sdk')).default;\n            } catch (error: any) {\n                throw new WalletLoadError(error?.message, error);\n            }\n\n            let wallet: Solflare;\n            try {\n                wallet = new SolflareClass({ network: this._config.network });\n            } catch (error: any) {\n                throw new WalletConfigError(error?.message, error);\n            }\n\n            this._connecting = true;\n\n            if (!wallet.connected) {\n                try {\n                    await wallet.connect();\n                } catch (error: any) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n\n            if (!wallet.publicKey) throw new WalletConnectionError();\n\n            let publicKey: PublicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            } catch (error: any) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n\n            wallet.on('disconnect', this._disconnected);\n            wallet.on('accountChanged', this._accountChanged);\n\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n\n            this.emit('connect', publicKey);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            wallet.off('accountChanged', this._accountChanged);\n\n            this._wallet = null;\n            this._publicKey = null;\n\n            try {\n                await wallet.disconnect();\n            } catch (error: any) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n\n        this.emit('disconnect');\n    }\n\n    async sendTransaction<T extends Transaction | VersionedTransaction>(\n        transaction: T,\n        connection: Connection,\n        options: SendTransactionOptions = {}\n    ): Promise<TransactionSignature> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                const { signers, ...sendOptions } = options;\n\n                if (isVersionedTransaction(transaction)) {\n                    signers?.length && transaction.sign(signers);\n                } else {\n                    transaction = (await this.prepareTransaction(transaction, connection, sendOptions)) as T;\n                    signers?.length && (transaction as Transaction).partialSign(...signers);\n                }\n\n                sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n\n                return await wallet.signAndSendTransaction(transaction, sendOptions);\n            } catch (error: any) {\n                if (error instanceof WalletError) throw error;\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signTransaction<T extends Transaction | VersionedTransaction>(transaction: T): Promise<T> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return ((await wallet.signTransaction(transaction)) as T) || transaction;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signAllTransactions<T extends Transaction | VersionedTransaction>(transactions: T[]): Promise<T[]> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return ((await wallet.signAllTransactions(transactions)) as T[]) || transactions;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: Uint8Array): Promise<Uint8Array> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return await wallet.signMessage(message, 'utf8');\n            } catch (error: any) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private _disconnected = () => {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n\n            this._wallet = null;\n            this._publicKey = null;\n\n            this.emit('error', new WalletDisconnectedError());\n            this.emit('disconnect');\n        }\n    };\n\n    private _accountChanged = (newPublicKey?: PublicKey) => {\n        if (!newPublicKey) return;\n\n        const publicKey = this._publicKey;\n        if (!publicKey) return;\n\n        try {\n            newPublicKey = new PublicKey(newPublicKey.toBytes());\n        } catch (error: any) {\n            this.emit('error', new WalletPublicKeyError(error?.message, error));\n            return;\n        }\n\n        if (publicKey.equals(newPublicKey)) return;\n\n        this._publicKey = newPublicKey;\n        this.emit('connect', newPublicKey);\n    };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}