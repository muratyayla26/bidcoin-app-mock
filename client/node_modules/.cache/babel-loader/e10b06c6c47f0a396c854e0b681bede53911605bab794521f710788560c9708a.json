{"ast":null,"code":"import { ConnectionManager } from \"./connection-manager.js\";\nimport { DEFAULT_POPUP_WIDTH_PX, DEFAULT_POPUP_HEIGHT_PX } from \"./core/constants.js\";\nimport { Platform } from \"./core/types.js\";\nimport { useCallback, useEffect, useRef, useState } from 'react';\nexport const usePopupConnection = function () {\n  let {\n    enabled = true,\n    platform = Platform.UNKNOWN,\n    widthPx = DEFAULT_POPUP_WIDTH_PX,\n    heightPx = DEFAULT_POPUP_HEIGHT_PX\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const [exportedConnection, setExportedConnection] = useState(undefined);\n  const connectionManagerRef = useRef(new ConnectionManager(platform).onConnectionUpdated(connection => {\n    setExportedConnection(connection === null || connection === void 0 ? void 0 : connection.export());\n  }));\n  const open = useCallback((url, nonce) => {\n    connectionManagerRef.current.open({\n      heightPx,\n      nonce,\n      url,\n      widthPx\n    });\n  }, [connectionManagerRef, widthPx, heightPx]);\n  const close = useCallback(() => {\n    connectionManagerRef.current.close();\n  }, [connectionManagerRef]);\n  useEffect(() => {\n    if (enabled) {\n      connectionManagerRef.current.initialize();\n    } else {\n      connectionManagerRef.current.tearDown();\n    }\n  }, [connectionManagerRef]);\n  return {\n    close,\n    connection: exportedConnection,\n    open\n  };\n};","map":{"version":3,"names":["ConnectionManager","DEFAULT_POPUP_WIDTH_PX","DEFAULT_POPUP_HEIGHT_PX","Platform","useCallback","useEffect","useRef","useState","usePopupConnection","enabled","platform","UNKNOWN","widthPx","heightPx","arguments","length","undefined","exportedConnection","setExportedConnection","connectionManagerRef","onConnectionUpdated","connection","export","open","url","nonce","current","close","initialize","tearDown"],"sources":["../../src/use-popup-connection.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,iBAAiB,QAAE,yBAA2B;AAEvD,SACEC,sBAAsB,EACtBC,uBAAuB,QACxB,qBAAuB;AACxB,SAASC,QAAQ,QAAmB,iBAAmB;AACvD,SAASC,WAAW,EAAEC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAShE,OAAO,MAAMC,kBAAkB,GAAG,SAAAA,CAAA,EAKM;EAAA,IALL;IACjCC,OAAO,GAAG,IAAI;IACdC,QAAQ,GAAGP,QAAQ,CAACQ,OAAO;IAC3BC,OAAO,GAAGX,sBAAsB;IAChCY,QAAQ,GAAGX;EAAuB,IAAAY,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MACF,EAAE;EAClC,MAAM,CAACG,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGX,QAAQ,CAE1DS,SAAS,CAAC;EACZ,MAAMG,oBAAoB,GAAGb,MAAM,CACjC,IAAIN,iBAAiB,CAACU,QAAQ,CAAC,CAACU,mBAAmB,CAChDC,UAA6B,IAAI;IAChCH,qBAAqB,CAACG,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAEC,MAAM,EAAE,CAAC;EAC7C,CAAC,CACF,CACF;EAED,MAAMC,IAAI,GAAGnB,WAAW,CACtB,CAACoB,GAA6B,EAAEC,KAAc,KAAI;IAChDN,oBAAoB,CAACO,OAAO,CAACH,IAAI,CAAC;MAChCV,QAAQ;MACRY,KAAK;MACLD,GAAG;MACHZ;KACD,CAAC;EACJ,CAAC,EACD,CAACO,oBAAoB,EAAEP,OAAO,EAAEC,QAAQ,CAAC,CAC1C;EAED,MAAMc,KAAK,GAAGvB,WAAW,CAAC,MAAK;IAC7Be,oBAAoB,CAACO,OAAO,CAACC,KAAK,EAAE;EACtC,CAAC,EAAE,CAACR,oBAAoB,CAAC,CAAC;EAE1Bd,SAAS,CAAC,MAAK;IACb,IAAII,OAAO,EAAE;MACXU,oBAAoB,CAACO,OAAO,CAACE,UAAU,EAAE;KAC1C,MAAM;MACLT,oBAAoB,CAACO,OAAO,CAACG,QAAQ,EAAE;;EAE3C,CAAC,EAAE,CAACV,oBAAoB,CAAC,CAAC;EAE1B,OAAO;IACLQ,KAAK;IACLN,UAAU,EAAEJ,kBAAkB;IAC9BM;GACD;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}