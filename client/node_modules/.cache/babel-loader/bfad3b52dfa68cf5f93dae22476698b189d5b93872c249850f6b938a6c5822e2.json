{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseConnectSettings = exports.corsValidator = exports.DEFAULT_PRIORITY = void 0;\nconst version_1 = require(\"./version\");\nexports.DEFAULT_PRIORITY = 2;\nconst initialSettings = {\n  configSrc: './data/config.json',\n  version: version_1.VERSION,\n  debug: false,\n  priority: exports.DEFAULT_PRIORITY,\n  trustedHost: true,\n  connectSrc: version_1.DEFAULT_DOMAIN,\n  iframeSrc: `${version_1.DEFAULT_DOMAIN}iframe.html`,\n  popup: false,\n  popupSrc: `${version_1.DEFAULT_DOMAIN}popup.html`,\n  webusbSrc: `${version_1.DEFAULT_DOMAIN}webusb.html`,\n  transports: undefined,\n  pendingTransportEvent: true,\n  env: 'node',\n  lazyLoad: false,\n  timestamp: new Date().getTime(),\n  interactionTimeout: 600,\n  sharedLogger: true\n};\nconst parseManifest = manifest => {\n  if (!manifest) return;\n  if (typeof manifest.email !== 'string') return;\n  if (typeof manifest.appUrl !== 'string') return;\n  return {\n    email: manifest.email,\n    appUrl: manifest.appUrl\n  };\n};\nconst corsValidator = url => {\n  if (typeof url !== 'string') return;\n  if (url.match(/^https:\\/\\/([A-Za-z0-9\\-_]+\\.)*trezor\\.io\\//)) return url;\n  if (url.match(/^https?:\\/\\/localhost:[58][0-9]{3}\\//)) return url;\n  if (url.match(/^https:\\/\\/([A-Za-z0-9\\-_]+\\.)*sldev\\.cz\\//)) return url;\n  if (url.match(/^https?:\\/\\/([A-Za-z0-9\\-_]+\\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\\.onion\\//)) return url;\n};\nexports.corsValidator = corsValidator;\nconst parseConnectSettings = (input = {}) => {\n  var _a;\n  const settings = {\n    ...initialSettings\n  };\n  if ('debug' in input) {\n    if (typeof input.debug === 'boolean') {\n      settings.debug = input.debug;\n    } else if (typeof input.debug === 'string') {\n      settings.debug = input.debug === 'true';\n    }\n  }\n  if (input.trustedHost === false) {\n    settings.trustedHost = input.trustedHost;\n  }\n  if (typeof input.connectSrc === 'string' && ((_a = input.connectSrc) === null || _a === void 0 ? void 0 : _a.startsWith('http'))) {\n    settings.connectSrc = (0, exports.corsValidator)(input.connectSrc);\n  } else if (settings.trustedHost) {\n    settings.connectSrc = input.connectSrc;\n  }\n  const src = settings.connectSrc || version_1.DEFAULT_DOMAIN;\n  settings.iframeSrc = `${src}iframe.html`;\n  settings.popupSrc = `${src}popup.html`;\n  settings.webusbSrc = `${src}webusb.html`;\n  if (typeof input.transportReconnect === 'boolean') {\n    settings.transportReconnect = input.transportReconnect;\n  }\n  if (typeof input.webusb === 'boolean') {\n    settings.webusb = input.webusb;\n  }\n  if (Array.isArray(input.transports)) {\n    settings.transports = input.transports;\n  }\n  if (typeof input.popup === 'boolean') {\n    settings.popup = input.popup;\n  }\n  if (typeof input.lazyLoad === 'boolean') {\n    settings.lazyLoad = input.lazyLoad;\n  }\n  if (typeof input.pendingTransportEvent === 'boolean') {\n    settings.pendingTransportEvent = input.pendingTransportEvent;\n  }\n  if (typeof input.extension === 'string') {\n    settings.extension = input.extension;\n  }\n  if (typeof input.env === 'string') {\n    settings.env = input.env;\n  }\n  if (typeof input.timestamp === 'number') {\n    settings.timestamp = input.timestamp;\n  }\n  if (typeof input.interactionTimeout === 'number') {\n    settings.interactionTimeout = input.interactionTimeout;\n  }\n  if (typeof input.manifest === 'object') {\n    settings.manifest = parseManifest(input.manifest);\n  }\n  if (typeof input.sharedLogger === 'boolean') {\n    settings.sharedLogger = input.sharedLogger;\n  }\n  if (typeof input.coreMode === 'string' && ['auto', 'popup', 'iframe'].includes(input.coreMode)) {\n    settings.coreMode = input.coreMode;\n  }\n  if (typeof input._extendWebextensionLifetime === 'boolean') {\n    settings._extendWebextensionLifetime = input._extendWebextensionLifetime;\n  }\n  return settings;\n};\nexports.parseConnectSettings = parseConnectSettings;","map":{"version":3,"names":["Object","defineProperty","exports","value","parseConnectSettings","corsValidator","DEFAULT_PRIORITY","version_1","require","initialSettings","configSrc","version","VERSION","debug","priority","trustedHost","connectSrc","DEFAULT_DOMAIN","iframeSrc","popup","popupSrc","webusbSrc","transports","undefined","pendingTransportEvent","env","lazyLoad","timestamp","Date","getTime","interactionTimeout","sharedLogger","parseManifest","manifest","email","appUrl","url","match","input","_a","settings","startsWith","src","transportReconnect","webusb","Array","isArray","extension","coreMode","includes","_extendWebextensionLifetime"],"sources":["C:/Users/Administrator/solana-wallet-app/node_modules/@trezor/connect/lib/data/connectSettings.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseConnectSettings = exports.corsValidator = exports.DEFAULT_PRIORITY = void 0;\nconst version_1 = require(\"./version\");\nexports.DEFAULT_PRIORITY = 2;\nconst initialSettings = {\n    configSrc: './data/config.json',\n    version: version_1.VERSION,\n    debug: false,\n    priority: exports.DEFAULT_PRIORITY,\n    trustedHost: true,\n    connectSrc: version_1.DEFAULT_DOMAIN,\n    iframeSrc: `${version_1.DEFAULT_DOMAIN}iframe.html`,\n    popup: false,\n    popupSrc: `${version_1.DEFAULT_DOMAIN}popup.html`,\n    webusbSrc: `${version_1.DEFAULT_DOMAIN}webusb.html`,\n    transports: undefined,\n    pendingTransportEvent: true,\n    env: 'node',\n    lazyLoad: false,\n    timestamp: new Date().getTime(),\n    interactionTimeout: 600,\n    sharedLogger: true,\n};\nconst parseManifest = (manifest) => {\n    if (!manifest)\n        return;\n    if (typeof manifest.email !== 'string')\n        return;\n    if (typeof manifest.appUrl !== 'string')\n        return;\n    return {\n        email: manifest.email,\n        appUrl: manifest.appUrl,\n    };\n};\nconst corsValidator = (url) => {\n    if (typeof url !== 'string')\n        return;\n    if (url.match(/^https:\\/\\/([A-Za-z0-9\\-_]+\\.)*trezor\\.io\\//))\n        return url;\n    if (url.match(/^https?:\\/\\/localhost:[58][0-9]{3}\\//))\n        return url;\n    if (url.match(/^https:\\/\\/([A-Za-z0-9\\-_]+\\.)*sldev\\.cz\\//))\n        return url;\n    if (url.match(/^https?:\\/\\/([A-Za-z0-9\\-_]+\\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\\.onion\\//))\n        return url;\n};\nexports.corsValidator = corsValidator;\nconst parseConnectSettings = (input = {}) => {\n    var _a;\n    const settings = { ...initialSettings };\n    if ('debug' in input) {\n        if (typeof input.debug === 'boolean') {\n            settings.debug = input.debug;\n        }\n        else if (typeof input.debug === 'string') {\n            settings.debug = input.debug === 'true';\n        }\n    }\n    if (input.trustedHost === false) {\n        settings.trustedHost = input.trustedHost;\n    }\n    if (typeof input.connectSrc === 'string' && ((_a = input.connectSrc) === null || _a === void 0 ? void 0 : _a.startsWith('http'))) {\n        settings.connectSrc = (0, exports.corsValidator)(input.connectSrc);\n    }\n    else if (settings.trustedHost) {\n        settings.connectSrc = input.connectSrc;\n    }\n    const src = settings.connectSrc || version_1.DEFAULT_DOMAIN;\n    settings.iframeSrc = `${src}iframe.html`;\n    settings.popupSrc = `${src}popup.html`;\n    settings.webusbSrc = `${src}webusb.html`;\n    if (typeof input.transportReconnect === 'boolean') {\n        settings.transportReconnect = input.transportReconnect;\n    }\n    if (typeof input.webusb === 'boolean') {\n        settings.webusb = input.webusb;\n    }\n    if (Array.isArray(input.transports)) {\n        settings.transports = input.transports;\n    }\n    if (typeof input.popup === 'boolean') {\n        settings.popup = input.popup;\n    }\n    if (typeof input.lazyLoad === 'boolean') {\n        settings.lazyLoad = input.lazyLoad;\n    }\n    if (typeof input.pendingTransportEvent === 'boolean') {\n        settings.pendingTransportEvent = input.pendingTransportEvent;\n    }\n    if (typeof input.extension === 'string') {\n        settings.extension = input.extension;\n    }\n    if (typeof input.env === 'string') {\n        settings.env = input.env;\n    }\n    if (typeof input.timestamp === 'number') {\n        settings.timestamp = input.timestamp;\n    }\n    if (typeof input.interactionTimeout === 'number') {\n        settings.interactionTimeout = input.interactionTimeout;\n    }\n    if (typeof input.manifest === 'object') {\n        settings.manifest = parseManifest(input.manifest);\n    }\n    if (typeof input.sharedLogger === 'boolean') {\n        settings.sharedLogger = input.sharedLogger;\n    }\n    if (typeof input.coreMode === 'string' &&\n        ['auto', 'popup', 'iframe'].includes(input.coreMode)) {\n        settings.coreMode = input.coreMode;\n    }\n    if (typeof input._extendWebextensionLifetime === 'boolean') {\n        settings._extendWebextensionLifetime = input._extendWebextensionLifetime;\n    }\n    return settings;\n};\nexports.parseConnectSettings = parseConnectSettings;\n//# sourceMappingURL=connectSettings.js.map"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}